var require,define;!function(e){function r(e,r){function t(){clearTimeout(a)}if(!(e in u)){u[e]=!0;var i=document.createElement("script");if(r){var a=setTimeout(r,require.timeout);i.onerror=function(){clearTimeout(a),r()},"onload"in i?i.onload=t:i.onreadystatechange=function(){("loaded"==this.readyState||"complete"==this.readyState)&&t()}}return i.type="text/javascript",i.src=e,n.appendChild(i),i}}function t(e,t,n){var a=i[e]||(i[e]=[]);a.push(t);var o,u=s[e]||{},f=u.pkg;o=f?l[f].url:u.url||e,r(o,n&&function(){n(e)})}var n=document.getElementsByTagName("head")[0],i={},a={},o={},u={},s={},l={};define=function(e,r){a[e]=r;var t=i[e];if(t){for(var n=0,o=t.length;o>n;n++)t[n]();i[e]=null}},require=function(e){if(e&&e.splice)return require.async.apply(this,arguments);e=require.alias(e);var r=o[e];if(r)return r.exports;var t=a[e];if(!t)throw"[ModJS] Cannot find module `"+e+"`";r=o[e]={exports:{}};var n="function"==typeof t?t.apply(r,[require,r.exports,r]):t;return n&&(r.exports=n),r.exports},require.async=function(r,n,i){function o(e){for(var r=0,n=e.length;n>r;r++){var l=e[r];if(l in a){var f=s[l];f&&"deps"in f&&o(f.deps)}else if(!(l in c)){if(c[l]=!0,p++,/\.css$/.test(l)){var d=s[l]||{},v=d.url||l;require.loadCss({url:v}),u()}else t(l,u,i);var f=s[l];f&&"deps"in f&&o(f.deps)}}}function u(){if(0==p--){for(var t=[],i=0,a=r.length;a>i;i++)t[i]=require(r[i]);n&&n.apply(e,t)}}"string"==typeof r&&(r=[r]);for(var l=0,f=r.length;f>l;l++)r[l]=require.alias(r[l]);var c={},p=0;o(r),u()},require.resourceMap=function(e){var r,t;t=e.res;for(r in t)t.hasOwnProperty(r)&&(s[r]=t[r]);t=e.pkg;for(r in t)t.hasOwnProperty(r)&&(l[r]=t[r])},require.loadJs=function(e){r(e)},require.loadCss=function(e){if(e.content){var r=document.createElement("style");r.type="text/css",r.innerHTML=e.content,n.appendChild(r)}else if(e.url){var t=document.createElement("link");t.href=e.url,t.rel="stylesheet",t.type="text/css",n.appendChild(t)}},require.alias=function(e){return e},require.timeout=5e3}(this);
;var Zepto=function(){function t(t){return null==t?String(t):J[X.call(t)]||"object"}function e(e){return"function"==t(e)}function n(t){return null!=t&&t==t.window}function r(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function i(e){return"object"==t(e)}function o(t){return i(t)&&!n(t)&&Object.getPrototypeOf(t)==Object.prototype}function a(t){return"number"==typeof t.length}function s(t){return P.call(t,function(t){return null!=t})}function u(t){return t.length>0?j.fn.concat.apply([],t):t}function c(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function l(t){return t in L?L[t]:L[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function f(t,e){return"number"!=typeof e||Z[c(t)]?e:e+"px"}function h(t){var e,n;return _[t]||(e=A.createElement(t),A.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),_[t]=n),_[t]}function p(t){return"children"in t?O.call(t.children):j.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function d(t,e,n){for(E in e)n&&(o(e[E])||G(e[E]))?(o(e[E])&&!o(t[E])&&(t[E]={}),G(e[E])&&!G(t[E])&&(t[E]=[]),d(t[E],e[E],n)):e[E]!==b&&(t[E]=e[E])}function m(t,e){return null==e?j(t):j(t).filter(e)}function g(t,n,r,i){return e(n)?n.call(t,r,i):n}function v(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function y(t,e){var n=t.className||"",r=n&&n.baseVal!==b;return e===b?r?n.baseVal:n:void(r?n.baseVal=e:t.className=e)}function x(t){try{return t?"true"==t||("false"==t?!1:"null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?j.parseJSON(t):t):t}catch(e){return t}}function w(t,e){e(t);for(var n=0,r=t.childNodes.length;r>n;n++)w(t.childNodes[n],e)}var b,E,j,T,S,N,C=[],O=C.slice,P=C.filter,A=window.document,_={},L={},Z={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},$=/^\s*<(\w+|!)[^>]*>/,D=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,M=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,F=/^(?:body|html)$/i,R=/([A-Z])/g,k=["val","css","html","text","data","width","height","offset"],q=["after","prepend","before","append"],z=A.createElement("table"),H=A.createElement("tr"),V={tr:A.createElement("tbody"),tbody:z,thead:z,tfoot:z,td:H,th:H,"*":A.createElement("div")},B=/complete|loaded|interactive/,I=/^[\w-]*$/,J={},X=J.toString,U={},W=A.createElement("div"),Y={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},G=Array.isArray||function(t){return t instanceof Array};return U.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var r,i=t.parentNode,o=!i;return o&&(i=W).appendChild(t),r=~U.qsa(i,e).indexOf(t),o&&W.removeChild(t),r},S=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},N=function(t){return P.call(t,function(e,n){return t.indexOf(e)==n})},U.fragment=function(t,e,n){var r,i,a;return D.test(t)&&(r=j(A.createElement(RegExp.$1))),r||(t.replace&&(t=t.replace(M,"<$1></$2>")),e===b&&(e=$.test(t)&&RegExp.$1),e in V||(e="*"),a=V[e],a.innerHTML=""+t,r=j.each(O.call(a.childNodes),function(){a.removeChild(this)})),o(n)&&(i=j(r),j.each(n,function(t,e){k.indexOf(t)>-1?i[t](e):i.attr(t,e)})),r},U.Z=function(t,e){return t=t||[],t.__proto__=j.fn,t.selector=e||"",t},U.isZ=function(t){return t instanceof U.Z},U.init=function(t,n){var r;if(!t)return U.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&$.test(t))r=U.fragment(t,RegExp.$1,n),t=null;else{if(n!==b)return j(n).find(t);r=U.qsa(A,t)}else{if(e(t))return j(A).ready(t);if(U.isZ(t))return t;if(G(t))r=s(t);else if(i(t))r=[t],t=null;else if($.test(t))r=U.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==b)return j(n).find(t);r=U.qsa(A,t)}}return U.Z(r,t)},j=function(t,e){return U.init(t,e)},j.extend=function(t){var e,n=O.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){d(t,n,e)}),t},U.qsa=function(t,e){var n,i="#"==e[0],o=!i&&"."==e[0],a=i||o?e.slice(1):e,s=I.test(a);return r(t)&&s&&i?(n=t.getElementById(a))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:O.call(s&&!i?o?t.getElementsByClassName(a):t.getElementsByTagName(e):t.querySelectorAll(e))},j.contains=A.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},j.type=t,j.isFunction=e,j.isWindow=n,j.isArray=G,j.isPlainObject=o,j.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},j.inArray=function(t,e,n){return C.indexOf.call(e,t,n)},j.camelCase=S,j.trim=function(t){return null==t?"":String.prototype.trim.call(t)},j.uuid=0,j.support={},j.expr={},j.map=function(t,e){var n,r,i,o=[];if(a(t))for(r=0;r<t.length;r++)n=e(t[r],r),null!=n&&o.push(n);else for(i in t)n=e(t[i],i),null!=n&&o.push(n);return u(o)},j.each=function(t,e){var n,r;if(a(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(r in t)if(e.call(t[r],r,t[r])===!1)return t;return t},j.grep=function(t,e){return P.call(t,e)},window.JSON&&(j.parseJSON=JSON.parse),j.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){J["[object "+e+"]"]=e.toLowerCase()}),j.fn={forEach:C.forEach,reduce:C.reduce,push:C.push,sort:C.sort,indexOf:C.indexOf,concat:C.concat,map:function(t){return j(j.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return j(O.apply(this,arguments))},ready:function(t){return B.test(A.readyState)&&A.body?t(j):A.addEventListener("DOMContentLoaded",function(){t(j)},!1),this},get:function(t){return t===b?O.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return C.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return e(t)?this.not(this.not(t)):j(P.call(this,function(e){return U.matches(e,t)}))},add:function(t,e){return j(N(this.concat(j(t,e))))},is:function(t){return this.length>0&&U.matches(this[0],t)},not:function(t){var n=[];if(e(t)&&t.call!==b)this.each(function(e){t.call(this,e)||n.push(this)});else{var r="string"==typeof t?this.filter(t):a(t)&&e(t.item)?O.call(t):j(t);this.forEach(function(t){r.indexOf(t)<0&&n.push(t)})}return j(n)},has:function(t){return this.filter(function(){return i(t)?j.contains(this,t):j(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!i(t)?t:j(t)},last:function(){var t=this[this.length-1];return t&&!i(t)?t:j(t)},find:function(t){var e,n=this;return e=t?"object"==typeof t?j(t).filter(function(){var t=this;return C.some.call(n,function(e){return j.contains(e,t)})}):1==this.length?j(U.qsa(this[0],t)):this.map(function(){return U.qsa(this,t)}):j()},closest:function(t,e){var n=this[0],i=!1;for("object"==typeof t&&(i=j(t));n&&!(i?i.indexOf(n)>=0:U.matches(n,t));)n=n!==e&&!r(n)&&n.parentNode;return j(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=j.map(n,function(t){return(t=t.parentNode)&&!r(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return m(e,t)},parent:function(t){return m(N(this.pluck("parentNode")),t)},children:function(t){return m(this.map(function(){return p(this)}),t)},contents:function(){return this.map(function(){return O.call(this.childNodes)})},siblings:function(t){return m(this.map(function(t,e){return P.call(p(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return j.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=h(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var n=e(t);if(this[0]&&!n)var r=j(t).get(0),i=r.parentNode||this.length>1;return this.each(function(e){j(this).wrapAll(n?t.call(this,e):i?r.cloneNode(!0):r)})},wrapAll:function(t){if(this[0]){j(this[0]).before(t=j(t));for(var e;(e=t.children()).length;)t=e.first();j(t).append(this)}return this},wrapInner:function(t){var n=e(t);return this.each(function(e){var r=j(this),i=r.contents(),o=n?t.call(this,e):t;i.length?i.wrapAll(o):r.append(o)})},unwrap:function(){return this.parent().each(function(){j(this).replaceWith(j(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=j(this);(t===b?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return j(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return j(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var n=this.innerHTML;j(this).empty().append(g(this,t,e,n))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var n=g(this,t,e,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this[0].textContent:null},attr:function(t,e){var n;return"string"!=typeof t||1 in arguments?this.each(function(n){if(1===this.nodeType)if(i(t))for(E in t)v(this,E,t[E]);else v(this,t,g(this,e,n,this.getAttribute(t)))}):this.length&&1===this[0].nodeType?!(n=this[0].getAttribute(t))&&t in this[0]?this[0][t]:n:b},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){v(this,t)},this)})},prop:function(t,e){return t=Y[t]||t,1 in arguments?this.each(function(n){this[t]=g(this,e,n,this[t])}):this[0]&&this[0][t]},data:function(t,e){var n="data-"+t.replace(R,"-$1").toLowerCase(),r=1 in arguments?this.attr(n,e):this.attr(n);return null!==r?x(r):b},val:function(t){return 0 in arguments?this.each(function(e){this.value=g(this,t,e,this.value)}):this[0]&&(this[0].multiple?j(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var n=j(this),r=g(this,t,e,n.offset()),i=n.offsetParent().offset(),o={top:r.top-i.top,left:r.left-i.left};"static"==n.css("position")&&(o.position="relative"),n.css(o)});if(!this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,n){if(arguments.length<2){var r,i=this[0];if(!i)return;if(r=getComputedStyle(i,""),"string"==typeof e)return i.style[S(e)]||r.getPropertyValue(e);if(G(e)){var o={};return j.each(e,function(t,e){o[e]=i.style[S(e)]||r.getPropertyValue(e)}),o}}var a="";if("string"==t(e))n||0===n?a=c(e)+":"+f(e,n):this.each(function(){this.style.removeProperty(c(e))});else for(E in e)e[E]||0===e[E]?a+=c(E)+":"+f(E,e[E])+";":this.each(function(){this.style.removeProperty(c(E))});return this.each(function(){this.style.cssText+=";"+a})},index:function(t){return t?this.indexOf(j(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return t?C.some.call(this,function(t){return this.test(y(t))},l(t)):!1},addClass:function(t){return t?this.each(function(e){if("className"in this){T=[];var n=y(this),r=g(this,t,e,n);r.split(/\s+/g).forEach(function(t){j(this).hasClass(t)||T.push(t)},this),T.length&&y(this,n+(n?" ":"")+T.join(" "))}}):this},removeClass:function(t){return this.each(function(e){if("className"in this){if(t===b)return y(this,"");T=y(this),g(this,t,e,T).split(/\s+/g).forEach(function(t){T=T.replace(l(t)," ")}),y(this,T.trim())}})},toggleClass:function(t,e){return t?this.each(function(n){var r=j(this),i=g(this,t,n,y(this));i.split(/\s+/g).forEach(function(t){(e===b?!r.hasClass(t):e)?r.addClass(t):r.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===b?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===b?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),r=F.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(j(t).css("margin-top"))||0,n.left-=parseFloat(j(t).css("margin-left"))||0,r.top+=parseFloat(j(e[0]).css("border-top-width"))||0,r.left+=parseFloat(j(e[0]).css("border-left-width"))||0,{top:n.top-r.top,left:n.left-r.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||A.body;t&&!F.test(t.nodeName)&&"static"==j(t).css("position");)t=t.offsetParent;return t})}},j.fn.detach=j.fn.remove,["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});j.fn[t]=function(i){var o,a=this[0];return i===b?n(a)?a["inner"+e]:r(a)?a.documentElement["scroll"+e]:(o=this.offset())&&o[t]:this.each(function(e){a=j(this),a.css(t,g(this,i,e,a[t]()))})}}),q.forEach(function(e,n){var r=n%2;j.fn[e]=function(){var e,i,o=j.map(arguments,function(n){return e=t(n),"object"==e||"array"==e||null==n?n:U.fragment(n)}),a=this.length>1;return o.length<1?this:this.each(function(t,e){i=r?e:e.parentNode,e=0==n?e.nextSibling:1==n?e.firstChild:2==n?e:null;var s=j.contains(A.documentElement,i);o.forEach(function(t){if(a)t=t.cloneNode(!0);else if(!i)return j(t).remove();i.insertBefore(t,e),s&&w(t,function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},j.fn[r?e+"To":"insert"+(n?"Before":"After")]=function(t){return j(t)[e](this),this}}),U.Z.prototype=j.fn,U.uniq=N,U.deserializeValue=x,j.zepto=U,j}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(t){function e(t){return t._zid||(t._zid=h++)}function n(t,n,o,a){if(n=r(n),n.ns)var s=i(n.ns);return(g[e(t)]||[]).filter(function(t){return!(!t||n.e&&t.e!=n.e||n.ns&&!s.test(t.ns)||o&&e(t.fn)!==e(o)||a&&t.sel!=a)})}function r(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function i(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function o(t,e){return t.del&&!y&&t.e in x||!!e}function a(t){return w[t]||y&&x[t]||t}function s(n,i,s,u,l,h,p){var d=e(n),m=g[d]||(g[d]=[]);i.split(/\s/).forEach(function(e){if("ready"==e)return t(document).ready(s);var i=r(e);i.fn=s,i.sel=l,i.e in w&&(s=function(e){var n=e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?i.fn.apply(this,arguments):void 0}),i.del=h;var d=h||s;i.proxy=function(t){if(t=c(t),!t.isImmediatePropagationStopped()){t.data=u;var e=d.apply(n,t._args==f?[t]:[t].concat(t._args));return e===!1&&(t.preventDefault(),t.stopPropagation()),e}},i.i=m.length,m.push(i),"addEventListener"in n&&n.addEventListener(a(i.e),i.proxy,o(i,p))})}function u(t,r,i,s,u){var c=e(t);(r||"").split(/\s/).forEach(function(e){n(t,e,i,s).forEach(function(e){delete g[c][e.i],"removeEventListener"in t&&t.removeEventListener(a(e.e),e.proxy,o(e,u))})})}function c(e,n){return(n||!e.isDefaultPrevented)&&(n||(n=e),t.each(T,function(t,r){var i=n[t];e[t]=function(){return this[r]=b,i&&i.apply(n,arguments)},e[r]=E}),(n.defaultPrevented!==f?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(e.isDefaultPrevented=b)),e}function l(t){var e,n={originalEvent:t};for(e in t)j.test(e)||t[e]===f||(n[e]=t[e]);return c(n,t)}var f,h=1,p=Array.prototype.slice,d=t.isFunction,m=function(t){return"string"==typeof t},g={},v={},y="onfocusin"in window,x={focus:"focusin",blur:"focusout"},w={mouseenter:"mouseover",mouseleave:"mouseout"};v.click=v.mousedown=v.mouseup=v.mousemove="MouseEvents",t.event={add:s,remove:u},t.proxy=function(n,r){var i=2 in arguments&&p.call(arguments,2);if(d(n)){var o=function(){return n.apply(r,i?i.concat(p.call(arguments)):arguments)};return o._zid=e(n),o}if(m(r))return i?(i.unshift(n[r],n),t.proxy.apply(null,i)):t.proxy(n[r],n);throw new TypeError("expected function")},t.fn.bind=function(t,e,n){return this.on(t,e,n)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,n,r){return this.on(t,e,n,r,1)};var b=function(){return!0},E=function(){return!1},j=/^([A-Z]|returnValue$|layer[XY]$)/,T={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,n){return this.on(e,t,n)},t.fn.undelegate=function(t,e,n){return this.off(e,t,n)},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,n,r,i,o){var a,c,h=this;return e&&!m(e)?(t.each(e,function(t,e){h.on(t,n,r,e,o)}),h):(m(n)||d(i)||i===!1||(i=r,r=n,n=f),(d(r)||r===!1)&&(i=r,r=f),i===!1&&(i=E),h.each(function(f,h){o&&(a=function(t){return u(h,t.type,i),i.apply(this,arguments)}),n&&(c=function(e){var r,o=t(e.target).closest(n,h).get(0);return o&&o!==h?(r=t.extend(l(e),{currentTarget:o,liveFired:h}),(a||i).apply(o,[r].concat(p.call(arguments,1)))):void 0}),s(h,e,i,r,n,c||a)}))},t.fn.off=function(e,n,r){var i=this;return e&&!m(e)?(t.each(e,function(t,e){i.off(t,n,e)}),i):(m(n)||d(r)||r===!1||(r=n,n=f),r===!1&&(r=E),i.each(function(){u(this,e,r,n)}))},t.fn.trigger=function(e,n){return e=m(e)||t.isPlainObject(e)?t.Event(e):c(e),e._args=n,this.each(function(){e.type in x&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,n)})},t.fn.triggerHandler=function(e,r){var i,o;return this.each(function(a,s){i=l(m(e)?t.Event(e):e),i._args=r,i.target=s,t.each(n(s,e.type||e),function(t,e){return o=e.proxy(i),i.isImmediatePropagationStopped()?!1:void 0})}),o},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}}),t.Event=function(t,e){m(t)||(e=t,t=e.type);var n=document.createEvent(v[t]||"Events"),r=!0;if(e)for(var i in e)"bubbles"==i?r=!!e[i]:n[i]=e[i];return n.initEvent(t,r,!0),c(n)}}(Zepto),function(t){function e(e,n,r){var i=t.Event(n);return t(e).trigger(i,r),!i.isDefaultPrevented()}function n(t,n,r,i){return t.global?e(n||y,r,i):void 0}function r(e){e.global&&0===t.active++&&n(e,null,"ajaxStart")}function i(e){e.global&&!--t.active&&n(e,null,"ajaxStop")}function o(t,e){var r=e.context;return e.beforeSend.call(r,t,e)===!1||n(e,r,"ajaxBeforeSend",[t,e])===!1?!1:void n(e,r,"ajaxSend",[t,e])}function a(t,e,r,i){var o=r.context,a="success";r.success.call(o,t,a,e),i&&i.resolveWith(o,[t,a,e]),n(r,o,"ajaxSuccess",[e,r,t]),u(a,e,r)}function s(t,e,r,i,o){var a=i.context;i.error.call(a,r,e,t),o&&o.rejectWith(a,[r,e,t]),n(i,a,"ajaxError",[r,i,t||e]),u(e,r,i)}function u(t,e,r){var o=r.context;r.complete.call(o,e,t),n(r,o,"ajaxComplete",[e,r]),i(r)}function c(){}function l(t){return t&&(t=t.split(";",2)[0]),t&&(t==j?"html":t==E?"json":w.test(t)?"script":b.test(t)&&"xml")||"text"}function f(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function h(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=f(e.url,e.data),e.data=void 0)}function p(e,n,r,i){return t.isFunction(n)&&(i=r,r=n,n=void 0),t.isFunction(r)||(i=r,r=void 0),{url:e,data:n,success:r,dataType:i}}function d(e,n,r,i){var o,a=t.isArray(n),s=t.isPlainObject(n);t.each(n,function(n,u){o=t.type(u),i&&(n=r?i:i+"["+(s||"object"==o||"array"==o?n:"")+"]"),!i&&a?e.add(u.name,u.value):"array"==o||!r&&"object"==o?d(e,u,r,n):e.add(n,u)})}var m,g,v=0,y=window.document,x=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,w=/^(?:text|application)\/javascript/i,b=/^(?:text|application)\/xml/i,E="application/json",j="text/html",T=/^\s*$/,S=y.createElement("a");S.href=window.location.href,t.active=0,t.ajaxJSONP=function(e,n){if(!("type"in e))return t.ajax(e);var r,i,u=e.jsonpCallback,c=(t.isFunction(u)?u():u)||"jsonp"+ ++v,l=y.createElement("script"),f=window[c],h=function(e){t(l).triggerHandler("error",e||"abort")},p={abort:h};return n&&n.promise(p),t(l).on("load error",function(o,u){clearTimeout(i),t(l).off().remove(),"error"!=o.type&&r?a(r[0],p,e,n):s(null,u||"error",p,e,n),window[c]=f,r&&t.isFunction(f)&&f(r[0]),f=r=void 0}),o(p,e)===!1?(h("abort"),p):(window[c]=function(){r=arguments},l.src=e.url.replace(/\?(.+)=\?/,"?$1="+c),y.head.appendChild(l),e.timeout>0&&(i=setTimeout(function(){h("timeout")},e.timeout)),p)},t.ajaxSettings={type:"GET",beforeSend:c,success:c,error:c,complete:c,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:E,xml:"application/xml, text/xml",html:j,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var n,i=t.extend({},e||{}),u=t.Deferred&&t.Deferred();for(m in t.ajaxSettings)void 0===i[m]&&(i[m]=t.ajaxSettings[m]);r(i),i.crossDomain||(n=y.createElement("a"),n.href=i.url,n.href=n.href,i.crossDomain=S.protocol+"//"+S.host!=n.protocol+"//"+n.host),i.url||(i.url=window.location.toString()),h(i);var p=i.dataType,d=/\?.+=\?/.test(i.url);if(d&&(p="jsonp"),i.cache!==!1&&(e&&e.cache===!0||"script"!=p&&"jsonp"!=p)||(i.url=f(i.url,"_="+Date.now())),"jsonp"==p)return d||(i.url=f(i.url,i.jsonp?i.jsonp+"=?":i.jsonp===!1?"":"callback=?")),t.ajaxJSONP(i,u);var v,x=i.accepts[p],w={},b=function(t,e){w[t.toLowerCase()]=[t,e]},E=/^([\w-]+:)\/\//.test(i.url)?RegExp.$1:window.location.protocol,j=i.xhr(),N=j.setRequestHeader;if(u&&u.promise(j),i.crossDomain||b("X-Requested-With","XMLHttpRequest"),b("Accept",x||"*/*"),(x=i.mimeType||x)&&(x.indexOf(",")>-1&&(x=x.split(",",2)[0]),j.overrideMimeType&&j.overrideMimeType(x)),(i.contentType||i.contentType!==!1&&i.data&&"GET"!=i.type.toUpperCase())&&b("Content-Type",i.contentType||"application/x-www-form-urlencoded"),i.headers)for(g in i.headers)b(g,i.headers[g]);if(j.setRequestHeader=b,j.onreadystatechange=function(){if(4==j.readyState){j.onreadystatechange=c,clearTimeout(v);var e,n=!1;if(j.status>=200&&j.status<300||304==j.status||0==j.status&&"file:"==E){p=p||l(i.mimeType||j.getResponseHeader("content-type")),e=j.responseText;try{"script"==p?(1,eval)(e):"xml"==p?e=j.responseXML:"json"==p&&(e=T.test(e)?null:t.parseJSON(e))}catch(r){n=r}n?s(n,"parsererror",j,i,u):a(e,j,i,u)}else s(j.statusText||null,j.status?"error":"abort",j,i,u)}},o(j,i)===!1)return j.abort(),s(null,"abort",j,i,u),j;if(i.xhrFields)for(g in i.xhrFields)j[g]=i.xhrFields[g];var C="async"in i?i.async:!0;j.open(i.type,i.url,C,i.username,i.password);for(g in w)N.apply(j,w[g]);return i.timeout>0&&(v=setTimeout(function(){j.onreadystatechange=c,j.abort(),s(null,"timeout",j,i,u)},i.timeout)),j.send(i.data?i.data:null),j},t.get=function(){return t.ajax(p.apply(null,arguments))},t.post=function(){var e=p.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=p.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,n,r){if(!this.length)return this;var i,o=this,a=e.split(/\s/),s=p(e,n,r),u=s.success;return a.length>1&&(s.url=a[0],i=a[1]),s.success=function(e){o.html(i?t("<div>").html(e.replace(x,"")).find(i):e),u&&u.apply(o,arguments)},t.ajax(s),this};var N=encodeURIComponent;t.param=function(e,n){var r=[];return r.add=function(e,n){t.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(N(e)+"="+N(n))},d(r,e,n),r.join("&").replace(/%20/g,"+")}}(Zepto),function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(e,n){return e=e||[],t.extend(e,t.fn),e.selector=n||"",e.__Z=!0,e},isZ:function(e){return"array"===t.type(e)&&"__Z"in e}})}(Zepto);
;window.local={zh:{install:"安装",viewMore:"查看更多",rank:"排行",featured:"精品",more:"更多"},en:{install:"Install",viewMore:"View more",rank:"Rank",featured:"Featured",more:"more"}};
;define("assets/js/formate/formateApp.js",function(){function n(n,t){return t.status=local.install,t.installed=!1,t.apkSize=e(t.apkSize+(t.appendSize||0)),t.icon=n+t.icon,t.ratingScore=2*t.ratingScore,t}var e=function(n){return n=(n/1048576).toFixed(1),0==n&&(n=.1),n};return n});
;define("assets/js/formate/applist.js",function(a){var s=a("assets/js/formate/formateApp.js"),t={zh:{ad:"广告"},en:{ad:"Ad"}};t=t[lang];var e=function(a){var e=a.listApp,p=a.thumbnail+(a.iconQuality||"webp/l144q80/");n(e,a.positionList,a.appIdDigestMap);for(var i=[],l=0,r=e.length;r>l;l++){var f=s(p,e[l]),d=f.ads,o=f.tagStyle,g=o&&o.style?o.style:"",u=o&&o.text?o.text:"";1===d&&2!==f.adType?(!u&&(u=t.ad),f.flag=g?'<span style="'+g+'">'+u+"</span>":'<span class="applist-ad">'+u+"</span>"):1!==d&&g&&u&&(f.flag='<span style="'+g+'">'+u+"</span>"),i.push(f)}return i},n=function(a,s,t){if(s)for(var e=0,n=s.length;n>e;e++){var p=a[s[e]];if(p){p.ads=1;var i=p.id;t&&t[i]&&(p.digest=t[i])}}};return e});
;define("assets/js/formate/banner.js",function(){var e={zh:{ad:"广告"},en:{ad:"Ad"}};e=e[lang];var a=function(a){a=$.extend({imgQuality:"webp/l320q80/",icon:"mticon"},a);for(var n=a.bannerList,t=a.host,i=a.imgQuality,r=0,l=n.length;l>r;r++){var s=n[r];s.webViewPic&&s.webViewUrl?(s.title=s.webViewTitle,s.featuredType=3,s.link=s.webViewUrl,s.bannerUrl=t+i+s.webViewPic):s.bannerUrl=t+i+s[a.icon];var b=s.ads,w=s.tagStyle,d=w&&w.text?w.text:"";1===b&&2!==s.adType&&(!d&&(d=e.ad),s.flag='<span class="banner-ad">'+d+"</span>")}return n};return a});
;define("assets/js/formate/removeSuffix.js",function(){var e=function(e){return e?(e.forEach(function(e){var a=e.displayName,n=a.match(/-|—/);n&&(e.displayName=a.slice(0,n.index))}),e):[]};return e});
;define("assets/js/formate/mingleList.js",function(e){function a(e,a,o){void 0!==o&&(d=o),n=t[d]?t[d]:t[d]={appIndex:0,recIndex:0,winIndex:0,recWordIndex:0,recAppDescIndex:0,recAppsIndex:0,singleAppIndex:0,adIndex:0,cptAdIndex:0,recZoneIndex:0,tmpWinIndex:0,recAppDesc1Index:0,carouselRecIndex:0,recAppsHdIndex:0,recAppsColorIndex:0,recAppsBgIndex:0,recAppsGameBannerDes:0},a&&(n=t[d]={appIndex:0,recIndex:0,winIndex:0,recWordIndex:0,recAppDescIndex:0,recAppsIndex:0,singleAppIndex:0,adIndex:0,cptAdIndex:0,recZoneIndex:0,tmpWinIndex:0,recAppDesc1Index:0,carouselRecIndex:0,recAppsHdIndex:0,recAppsColorIndex:0,recAppsBgIndex:0,recAppsGameBannerDes:0});var i=e.list,x=e.thumbnail;return i.forEach(function(a,d){switch(a.data.thumbnail=x,a.type){case"listApp":for(var t=c(a.data),d=0,o=t.length;o>d;d++){var a=t[d];a.$index=n.appIndex++,a.$rankIndex=n.appIndex,isInstantData&&a.browser&&(a.pos=n.appIndex-1,a.index='<p><span class="statistics-index">'+n.appIndex+"</span></p>",a.tapAmount="<p><span>点：</span><span>"+a.browser+"</span></p>",a.downAmount="<p><span>下：</span><span>"+a.download+"</span></p>",a.covertRate="<p><span>转：</span><span>"+a.ctr+"</span></p>"),s.cache(a)}break;case"recZone":for(var t=c(a.data),d=0,o=t.length;o>d;d++){var a=t[d];a.$index=n.recZoneIndex+"_"+d,s.cache(a)}n.recZoneIndex++;break;case"recAppsRichTitleEachBannerDes":var i=a.data;i.listApp.forEach(function(e){e.imgUrl=x+"webp/l720q80/"+e.imgUrl,e.recommendIndexStyle=e.recommendIndex/5*80});for(var t=c(i),d=0,o=t.length;o>d;d++){var a=t[d];a.$index=n.recAppDesc1Index+"_"+d,s.cache(a)}n.recAppDesc1Index++;break;case"window":var l=a.data.window;l.forEach(function(a){a.$index=n.winIndex+"_"+a.position,a.src=e.thumbnail+"webp/q80/"+a.icon,s.cache(a)}),n.winIndex++;break;case"recommend":var I=a.data,h="jpeg/l320/",A=I.topfeaturedList[0].displayType;(1===A||11===A)&&(h="jpeg/l720/");for(var m=r({bannerList:I.topfeaturedList,host:I.thumbnail,imgQuality:h}),d=0,o=m.length;o>d;d++){var a=m[d];a.$index=n.recIndex++,s.cache(a),isInstantData&&a.browser&&(a.pos=n.recIndex-1,a.tapAmount="<p><span>点：</span><span>"+a.browser+"</span></p>",a.downAmount="<p><span>下：</span><span>"+a.download+"</span></p>",a.covertRate="<p><span>转：</span><span>"+a.ctr+"</span></p>")}break;case"menu":for(var f=a.data,b=f.menu,h=f.thumbnail+"png/w105/",d=0,o=b.length;o>d;d++){var a=b[d];a.icon=h+a.src,a.$index=d,s.cache(a),isInstantData&&(a.tapAmount="<p><span>点：</span><span>"+a.browser+"</span></p>",a.downAmount="<p><span>下：</span><span>"+a.download+"</span></p>",a.covertRate="<p><span>转：</span><span>"+a.ctr+"</span></p>",a.pagePos="menu"+d)}break;case"nav":for(var u=a.data,v=u.menu,h=(u.position,u.thumbnail+"png/l69/"),d=0,o=v.length;o>d;d++){var a=v[d];a.icon=h+a.src,a.$index=d,s.cache(a)}break;case"recWords":var l=a.data.words;l.forEach(function(e,a){e.$index=n.recWordIndex+"_"+a,s.cache(e)}),n.recWordIndex++;break;case"recAppDesc":var i=a.data;i.banner=x+"webp/l720q80/"+i.banner;var l=c(i);l.forEach(function(e,a){e.$index=n.recAppDescIndex+"_"+a,s.cache(e)}),i.$index=n.recAppDescIndex,s.cache(i),n.recAppDescIndex++;break;case"recApps":var i=a.data,t=c(i);t=p(t),t.forEach(function(e,a){e.$index=n.recAppsIndex+"_"+a,s.cache(e)}),i.$index=n.recAppsIndex,s.cache(i),n.recAppsIndex++;break;case"recApp":var g=a.data;g.$index=n.singleAppIndex++,g.status=local.install,g.installed=!1,g.bannerUrl=x+"jpeg/l720/"+g.bannerUrl,s.cache(g);break;case"adApp":var t=c(a.data);t.forEach(function(e){e.$index=n.adIndex++,s.cache(e)});break;case"cptApp":var t=c(a.data);t.forEach(function(e){e.$index=n.cptAdIndex++,s.cache(e)});break;case"catList":for(var i=a.data,w=i.rowList,o=0;o<w.length;o++){var $=w[o],k=$.leftCell;k.cellIcon=x+"png/l90/"+k.cellIcon}var D=i.extendIcon;D&&(i.extendIcon=x+"png/l90/"+D);break;case"catNav":for(var u=a.data,v=u.menu,d=0,o=v.length;o>d;d++){var a=v[d];a.icon=x+"png/l72/"+a.src,a.$index=d,s.cache(a)}break;case"carouselRecommend":for(var j=a.data,B=r({bannerList:j.topfeaturedList,host:x,imgQuality:"jpeg/l720/"}),d=0,o=B.length;o>d;d++){var a=B[d];a.$index=n.carouselRecIndex++,s.cache(a)}break;case"activityRecommend":a.data.$index=n.tmpWinIndex++,s.cache(a);break;case"recAppsHd":var i=a.data;i.bgBanner=x+"jpeg/l720/"+i.bgBanner;var t=c(i);t=p(t),t.forEach(function(e,a){e.$index=n.recAppsHdIndex+"_"+a,s.cache(e)}),i.$index=n.recAppsHdIndex,s.cache(i),n.recAppsHdIndex++;break;case"recAppsBg":var i=a.data;i.bgBanner=x+"jpeg/l720/"+i.bgBanner;var t=c(i);t=p(t),t.forEach(function(e,a){e.$index=n.recAppsBgIndex+"_"+a,s.cache(e)}),i.$index=n.recAppsBgIndex,s.cache(i),n.recAppsBgIndex++;break;case"recAppsColor":var i=a.data,t=c(i);t=p(t),t.forEach(function(e,a){e.$index=n.recAppsColorIndex+"_"+a,s.cache(e)}),n.recAppsColorIndex++;break;case"recAppsGameBannerDes":var i=a.data,t=c(i);t.forEach(function(e,a){e.$index=n.recAppsGameBannerDes+"_"+a,e.imgUrl=x+"webp/l720q80/"+e.imgUrl,s.cache(e)}),n.recAppsGameBannerDes++}}),i}var n,r=e("assets/js/formate/banner.js"),c=e("assets/js/formate/applist.js"),p=e("assets/js/formate/removeSuffix.js"),s=e("assets/js/module/itemData.js"),d="default",t={};return a});
;define("assets/js/global.js",function(e,a){function t(){var e=localStorage.getItem("isNewUser");return null===e?(localStorage.setItem("activeTime",Date.now()),localStorage.setItem("isNewUser",!0),!0):e?Date.now()-localStorage.getItem("activeTime")>6048e5?(localStorage.setItem("isNewUser",!1),!1):(localStorage.setItem("isNewUser",!0),!0):!1}window.ajaxData=JSON.parse(market.getDeviceInfo()),window.globle={},ajaxData.newUser=t(),ajaxData.page=0,ajaxData.combine=1,window.h5=ajaxData.h5=1,window.screenSize={width:window.innerWidth,height:window.innerHeight},window.HOST="https://app.market.xiaomi.com/apm/";var i=market.checkApis(JSON.stringify({apiNames:[{name:"getPref"}]}));if(i){var o=market.getPref("pref_key_staging_mode");switch(o){case"1":window.HOST="http://staging.appapi.n.xiaomi.com/apm/";break;case"2":window.HOST="http://dev.staging.appapi.n.xiaomi.com/apm/";break;case"3":window.HOST="http://preview.app.market.pt.xiaomi.com/apm/"}}window.PROTOCOL="file://",window.isInstantData=!1;var r=market.checkApis(JSON.stringify({apiNames:[{name:"isUseRealTimeDataServer"}]}));r&&market.isUseRealTimeDataServer()&&(window.HOST="http://appstore.d.xiaomi.net/appstore/apm/",window.isInstantData=!0),ajaxData.supportSlide=market.interceptSlideEvent&&market.registerPageVisible?1:0;var n=function(e){requestAnimationFrame(function(){requestAnimationFrame(function(){requestAnimationFrame(function(){e()})})})},s=ajaxData.la;s="zh"===s||"bo"===s?"zh":"en",window.lang=s,window.local=local[s],window.exposureParam={},window.loadPageMethod={FLAG_ACTIVITY_NEW_TASK:268435456,FLAG_ACTIVITY_SINGLE_TOP:536870912,FLAG_ACTIVITY_CLEAR_TOP:67108864},window.loadDetailMethod=loadPageMethod.FLAG_ACTIVITY_NEW_TASK|loadPageMethod.FLAG_ACTIVITY_CLEAR_TOP,market.getPageRef&&(ajaxData.pageRef=market.getPageRef());var l=[];globle.viewStatus=!0,globle.registerViewStatus=function(e){return l.push(e),market.registerViewStatus(JSON.stringify({callBack:"window.globle.registerViewStatusCb"}))},globle.removeReginsterViewStatus=function(e){var a=l.indexOf(e);-1!==a&&l.splice(a,1)},globle.registerViewStatusCb=function(e){"selected"===e?globle.viewStatus=!0:"unselected"===e&&(globle.viewStatus=!1),l.forEach(function(e){e(globle.viewStatus)})};var g=[];if(globle.visibleStatus=!0,globle.registerPageVisible=function(e){return market.registerPageVisible?(g.push(e),market.registerPageVisible(JSON.stringify({callBack:"window.globle.registerPageVisibleCb"}))):void 0},globle.removeRegisterPageVisible=function(e){var a=g.indexOf(e);-1!==a&&g.splice(a,1)},globle.registerPageVisibleCb=function(e){"true"===e?globle.visibleStatus=!0:"false"===e&&(globle.visibleStatus=!1),g.forEach(function(e){e(globle.visibleStatus)})},/Mi-4c/.test(navigator.userAgent)){var w=document.querySelector('meta[name="viewport"]');w.setAttribute("content","width=device-width, initial-scale=1.0, user-scalable=no")}a.afterActive=n});
;define("assets/js/createReqQuery.js",function(e){function a(e){var a=e.elem,r=e.cacheItem||{},t={h5:h5,ad:0,sid:$(a).closest(".J_feed").data("sid")},s=r.outerTraceId;s&&(t.outerTraceId=s);var i=r.ext;i&&(t.ext=i);var d=r.packageName;d&&(t.pName=d);var f=e.posPrefix,n=r.digest;n&&(t.di=n),1===r.ads&&(t.ad=1);var o=r.experimentalId;o&&(t.expid=o),t.refs=ajaxData.refs;var l=r.$index;t.pos=f+l;var m=r.position,c=r.linkTitle||r.displayName||r.title,v=e.customRef;if(e.newRef&&!v)var x=ref+"_"+f+"_"+l;else if(v)var x=v;else var x=ref;return t=$.extend(t,r.extraParams),{extra_params:t,refPosition:m,ref:x,title:c}}e("assets/js/module/itemData.js");return a});
;define("assets/js/device.js",function(e,t,a){function n(){var e=document.getElementById("wxTip");e.removeEventListener("touchstart",n,!1),document.body.removeChild(e)}function r(e){i=e,-1===c.indexOf(e)&&c.push(e)}function o(e){for(var t=0,a=e.length;a>t;t++){var n=i+e[t].packageName;s[n]&&(s[n]=null)}}window.mobileCb={};var s=window.cacheList={},i="index-",c=[i],d=function(e,t){t.forEach(function(t){var a=t.packageName,n=e.querySelector('.J_btnInstall[data-pname="'+a+'"]');if(n){n.classList.remove("J_btnInstall");var r={btn:n.querySelector("button"),progress:n.querySelector(".J_appProgress"),progressStatusTxt:n.querySelector(".J_appStatusProgress"),statusTxt:n.querySelector(".J_appStatus"),wrap:n},o=i+a;s[o]?s[o].push(r):s[o]=[r]}})},u=function(e){var t=-1!=navigator.userAgent.toLowerCase().indexOf("micromessenger");if(t){if(!document.getElementById("wxTip")){var a=document.createElement("div");a.className="modal-backdrop",a.id="wxTip",a.innerHTML='<div class="download-arrow"></div><div class="download-txt">通过“在浏览器打开”<br>下载应用吧</div>',document.body.appendChild(a),a.addEventListener("touchstart",n,!1)}return!1}window.location="http://r.app.xiaomi.com/download/"+e.appId},l=function(){};a.exports={checkAppsStatus:d,install:u,registerAppStatus:l,setPrefix:r,clearMemory:o}});
;define("assets/js/scrollRequest.js",function(o){function s(o){var s=o.load,t=o.msg,a=o.opt;a.callBack(t),t.hasMore?(s&&s.show(),e(r,a)):s&&s.showEmpty()}var t,a=o("assets/js/request.js").getJSON,e=o("assets/js/scrollBottomEvent.js"),n=!0,l=[];$(window).on("scroll.scrollReq",function(){clearTimeout(t),n=!1,t=setTimeout(function(){for(;l.length>=1;)s(l.shift());n=!0},48)});var r=function(o){var t=o.load,c=o.errorCallBack;t&&t.showLoading(),o.noRequest?(o.noRequest=!1,e(r,o),t.show(),t.changePositon("bottom")):a({url:o.url,data:o.data,callBack:function(a){t&&t.changePositon("bottom"),n?s({msg:a,opt:o,load:t}):l.push({msg:a,opt:o,load:t})},errorCallBack:function(){t&&t.showErr(),e(r,o),c&&c()}})};return r});
;define("assets/js/module/lazyLoad.js",function(t,o,a){function e(t,o){var a=t.img;"img"===a.tagName.toLowerCase()?a.src=a.dataset.src:a.style["background-image"]="url("+a.dataset.src+")",a.classList.add(o?"lazyload-fadein":"lazyload-show"),t.isLoad=!0,t.isLoading=!1}function n(t){return t.scrollTop||window.scrollY}var i=window.innerWidth,r=function(t){var o=this;t=$.extend({images:".J_lazyload",buffer:450,timeout:150,fadeIn:!0,bufferWidth:10,loadImmdiately:!0},t);var a=t.contain;i+=t.bufferWidth,a?($handler=$(a),o.containHeight=$handler.height()):(a=document.body,$handler=$(window),o.containHeight=$handler.height()),o.contain=a,o.timeout=t.timeout,o.buffer=t.buffer,o.images=t.images,o.fadeIn=t.fadeIn,o.cache={},o.positions=[],o.scrollStop=!0,o.loadImmdiately=t.loadImmdiately,o.downloadedImgs=[];var n;$handler.on("scroll.lazyload",function(){o.scrollStop=!1,n||(n=setTimeout(function(){o.loadImg(o.fadeIn),n=null},t.timeout))});var r;$handler.on("scroll.slazyload",function(){clearTimeout(r),r=setTimeout(function(){for(;0!==o.downloadedImgs.length;){var t=o.downloadedImgs.shift();e(t,o.fadeIn)}o.scrollStop=!0},48)});var l=t.extralDoms;l&&o.addExtralDoms($(l))};r.prototype.addExtralDoms=function(t){var o,a=this;t.on("scroll.lazyload",function(t){o||(o=setTimeout(function(){a.loadImg(!0,t),o=null},a.timeout))})},r.prototype.update=function(t){var o=this.contain.querySelectorAll(this.images);o.length&&(this.updateIndexData(o),this.loadImg(t))},r.prototype.load=function(t,o){var a=this;if(!t.isLoad&&!t.isLoading){var n=t.img,i=function(t){return function(){!t.lazy||t.lazy&&a.scrollStop?e(t,o):(a.downloadedImgs.push(t),t.isLoading=!1)}}(t),r=function(t){return function(){t.isLoading=!1}}(t);t.isLoading=!0;var l=new Image;l.src=n.dataset.src,l.onload=i,l.onerror=r}},r.prototype.getLoadIndex=function(t,o){for(var a=this,e=a.positions,n=a.containHeight,i=[],r=t-o,l=t+n+o,s=0,d=e.length;d>s;s++){var c=e[s];c>r&&l>c&&i.push(c)}return i},r.prototype.updateIndexData=function(t){for(var o=this.cache,a=this.positions,e=n(this.contain),r=0,l=t.length;l>r;r++){var s=t[r],d=s.getBoundingClientRect(),c=parseInt(d.top+e),u=d.left;o[c]||(a.push(c),o[c]=[]);var f=s.dataset.lazy,h={img:s,isLoad:!1,isLoading:!1,left:u,lazy:f};o[c].push(h),s.classList.remove("J_lazyload"),this.loadImmdiately&&!f&&i>u&&this.load(h,this.fadeIn)}},r.prototype.loadImg=function(t,o){var a=this;void 0===t&&(t=a.fadeIn);var e=a.cache,r=n(a.contain),l=a.getLoadIndex(r,a.buffer),s=0;if(void 0!==o){s=o.target.scrollLeft;var d=o.target.clientHeight,c=Math.floor(o.target.getBoundingClientRect().top),r=n(this.contain);l=l.filter(function(t){return t>=c+r&&c+r+d>=t?!0:void 0})}for(var u=0,f=l.length;f>u;u++)for(var h=e[l[u]],g=0,m=h.length;m>g;g++){var p=h[g];p.left-s<i&&a.load(p,t)}},r.prototype.show=function(t){for(var o=this.contain.querySelectorAll(".J_lazyload"),a=0,e=o.length;e>a;a++){var n=o[a];"img"===n.tagName.toLowerCase()?n.src=n.dataset.src:n.style["background-image"]="url("+n.dataset.src+")";var i=n.classList;i.remove("J_lazyload"),i.remove("lazyload"),t||n.parentNode.classList.add("lazyload-nobg")}},r.prototype.clearMemory=function(t,o){var a=this,e=a.cache;a.positions=a.positions.filter(function(a){var n=a>=t&&o>a;return n&&(e[a]=null),!n})},a.exports=r});
;define("assets/js/module/exposure.js",function(t,e,o){function i(t){return t.scrollTop||window.scrollY}var n,r=t("assets/js/module/itemData.js"),a=window.innerWidth,s=function(t){var e=this;t=$.extend({apps:".J_exposure",buffer:0,timeout:800,bufferWidth:0},t);var o=t.contain;a+=t.bufferWidth,this.offsetTop=0,o?($handler=$(o),this.offsetTop=o.getBoundingClientRect().top,e.containHeight=$handler.height()):(o=document.body,$handler=$(window),e.containHeight=$handler.height()),e.$handler=$handler,e.contain=o,e.buffer=t.buffer,e.apps=t.apps,e.timeout=t.timeout,e.cache={},e.positions=[],$handler.on("scroll.exposure",function(){clearTimeout(n),n=setTimeout(function(){e.exposureApp()},t.timeout)});var i=t.extralDoms;i&&$(i).on("scroll.exposure",function(o){clearTimeout(n),n=setTimeout(function(){e.exposureApp(o)},t.timeout)}),globle.registerViewStatus(function(t){t&&(clearTimeout(n),n=setTimeout(function(){e.exposureApp()},e.timeout))})};s.prototype.update=function(){var t=this,e=t.contain.querySelectorAll(t.apps);e.length&&t.updateIndexData(e),clearTimeout(n),n=setTimeout(function(){t.exposureApp()},t.timeout)};var u=0,p=0;s.prototype.getLoadIndex=function(t,e){var o=this,i=o.positions,n=o.containHeight,r=[];u=t-e,p=t+n+e+this.offsetTop;for(var a=0,s=i.length;s>a;a++){var c=i[a];c>u&&p>c&&r.push(c)}return r},s.prototype.updateIndexData=function(t){for(var e=this.cache,o=this.positions,n=i(this.contain),r=0,a=t.length;a>r;r++){var s=t[r],u=s.getBoundingClientRect(),p=parseInt(u.top+n-this.offsetTop),c=u.left;e[p]||(o.push(p),e[p]=[]),e[p].push({dom:s,isLoad:!1,isLoading:!1,left:c,right:c+u.width,bottom:p+u.height}),s.classList.remove("J_exposure")}},s.prototype.exposureApp=function(t){if(globle.viewStatus){var e=this,o=e.cache,n=i(e.contain),s=e.getLoadIndex(n,e.buffer),u=0;void 0!==t&&(u=t.target.scrollLeft);for(var c=[],d=0,f=s.length;f>d;d++)for(var h=s[d],l=o[h],m=0,g=l.length;g>m;m++){var x=l[m];if(x.left-u>=0&&x.right-u<=a&&x.bottom<=p){var v=x.dom,T=v.dataset,b=r.get(T.cacheid)||{};c.push({index:b.$index||"",rId:b.rId||T.rid||"",appId:b.id||"",ad:b.ads||"",pos:b.position||"",pagePos:{l:x.left,t:h},sid:$(v).closest(".J_feed").data("sid")||""})}}0!==c.length&&marketAd.trackAdAction("mimarket_adfeedback","exposure",JSON.stringify({items:c,context:{scroll:n,ref:ref,refs:ajaxData.refs,screenSize:screenSize,extraParam:exposureParam}}))}},s.prototype.clearMemory=function(t,e){var o=this,i=o.cache;o.positions=o.positions.filter(function(o){var n=o>=t&&e>o;return n&&(i[o]=null),!n})},s.prototype.updateHeight=function(){this.containHeight=$handler.height()},o.exports=s});
;define("assets/js/module/dom.js",function(){return{id:function(e){return document.getElementById(e)}}});
;define("assets/js/module/domLazy.js",function(o,t,n){var e=function(o){var t,n=this,e=n.cacheList=[],i=o.contain;i?t=$(i):(i=document.body,t=$(window));var r,c=o.buffer||1e4,d=($(i),o.renderCb),s=o.clearCb;t.on("scroll.domLazy",function(){r||(r=setTimeout(function(){for(var o=i.scrollTop||window.scrollY,t=o-c,n=o+c,a=0,l=e.length;l>a;a++){var u=e[a],h=u.rended,f=u.top,p=u.bottom;n>=f&&f>=t||n>=p&&p>=t?h||d(u):h&&s(u,f,p)}r=null},150))})};e.prototype.add=function(o){var t=o.contain,n=$(t),e=n.position().top,i=n.height(),r=e+i;o=$.extend({top:e,height:i,bottom:r,rended:!0},o),this.cacheList.push(o)},n.exports=e});
;define("assets/js/module/query.js",function(){var r=function(r){var n=[];for(var e in r){var t=r[e];n.push(void 0!==t?e+"="+t:e)}return n.join("&")},n=function(r){for(var n=r.split("&"),e={},t=0,o=n.length;o>t;t++){var i=n[t].split("=");e[i[0]]=i[1]}return e};return{get:function(r){var e=n(location.search.slice(1))[r];return e?decodeURIComponent(e):e},add:function(e,t,o){var i,a=e.split("?");if("string"==typeof t){var u={};u[t]=o,t=u}for(var f in t)t[f]=encodeURIComponent(t[f]);if(1===a.length)i=r(t);else{var s=n(a[1]);for(var f in t)s[f]=t[f];i=r(s)}return a[0]+"?"+i},getQueryObject:n}});
;define("assets/js/module/render.js",function(){var n=function(n){for(var r=n.list,t="",e=n.tpl,i=0,a=r.length;a>i;i++){var o=r[i],c=e.replace(/{{([^{}]+)}}/g,function(n,r){var t=o[r];return t=void 0!==t?t.toString():""});t+=c}try{n.contain.innerHTML=t}catch(s){}};return n});
;define("assets/js/module/tap.js",function(t,e,n){var o,a,c=!0,s=function(t){var e=t.touches[0];o=e.clientX,a=e.clientY},i=function(t){var e=t.changedTouches[0],n=e.clientX,s=e.clientY;if(Math.abs(o-n)<3&&Math.abs(a-s)<3&&c){var i=new window.CustomEvent("tap",{bubbles:!0,cancelable:!0});t.target.dispatchEvent(i),c=!1,setTimeout(function(){c=!0},50)}},u=function(t){t.addEventListener("touchstart",s,!1),t.addEventListener("touchend",i,!1)},r=function(t){t.removeEventListener("touchstart",s,!1),t.removeEventListener("touchend",i,!1)};n.exports={on:u,off:r}});
;define("components/load/load.js",function(e,o,t){function n(e,o){this._node=e,this.changePositon(o)}var s={zh:{loading:"加载中…",end:"到底啦",loadMore:"加载更多",more:"更多",viewMore:"查看更多",noNetwork:"当前无网络连接，请连接后重试哟~",retry:"重试",reflesh:"刷新"},en:{viewMore:"View more",loading:"Just a sec",end:"You've reached the bottom of the page",loadMore:"View more",more:"More",noNetwork:"Can't connect to the network",retry:"Retry",reflesh:"Refresh"}};s=s[lang];var r=s.noNetwork,a='<i class="icon-loading-small"></i><span>'+s.loading+"</span>",i="<p>"+s.end+"</p>",d="<p><span>"+r+'</span><span class="btn-restry" data-retry="true">'+s.retry+"</span></p>",l='<div class="no-network"><span class="icon-no-network"></span><p>'+r+'</p><span class="btn-restry" data-retry="true">'+s.retry+"</span></div>",c='<div class="no-network-bottom"><span class="fl">'+r+'</span><span class="fr"><button class="btn-reflesh" data-retry="true">'+s.reflesh+"</button></span></div>",p="<span>"+s.loadMore+"</span>";n.prototype.show=function(){var e=this._node;e.classList.remove("hide"),e.innerHTML=p},n.prototype.showLoading=function(){var e=this._node;e.classList.remove("hide"),e.innerHTML=a},n.prototype.hide=function(){var e=this._node;e.classList.add("hide"),e.innerHTML=""},n.prototype.showEmpty=function(){var e=this._node;e.classList.remove("hide"),e.innerHTML=i},n.prototype.showErr=function(){this._node.innerHTML=this._errNode},n.prototype.changePositon=function(e){switch(e){case"bottom":this._node.className="load",this._errNode=d;break;case"fixBottom":this._node.className="load-bottom-fix",this._errNode=c;break;case"middle":this._node.className="load load-middle",this._errNode=l;break;default:this._errNode=l}};var h=function(e,o){var t=document.querySelector(e),s=new n(t,o);return s};t.exports=h});
;define("components/app-list/app-list.js",function(a,s){function t(a,s){var t=a.catId,e=a.subjectId;t&&e?ref="subject/"+e+"_"+t:e&&(ref="subject/"+e+"_-1");var i={h5:h5},n=a.experimentalId,p=a.adExtrasMap;n&&(i.expid=n),p&&$.extend(i,p),s.dataset.extraParams=JSON.stringify(i)}function e(a){var s=this.dataset,t=m.get(s.cacheid),e=t.packageName,p=t.id,l=n({elem:this,posPrefix:f,cacheItem:t});l.extra_params=$.extend(l.extra_params,JSON.parse(a.liveFired.dataset.extraParams));var d=t.displayName;if("button"===this.tagName.toLowerCase()){if(this.disabled)return;if("true"!==s.installed){var r=$.extend(l,{pName:e,appId:p});i.install(r);var u=$(this).closest("li");if(g&&"0"!==s.expendMore){s.expendMore=0;var h="recommend/relatedapps";c.getJSON({url:HOST+h+"?packageName="+e,data:ajaxData,key:h,callBack:function(a){if(a.data){for(var s=v(a.data),t=0,e=s.length;e>t;t++){var i=s[t];i.$index=t,m.cache(i)}o.render({contain:u[0],list:s,title:'安装 <span style="color:#09ae4a">'+d+"</span> 的用户还喜欢"})}}})}}else market.openApp(JSON.stringify({pName:e}))}else{l.extra_params.refs=ajaxData.refs+"-detail/"+p;var x=$.extend(l,{url:"mimarket://details?appId="+p,title:d,launchMode:loadDetailMethod});market.loadPage(JSON.stringify(x))}a.stopPropagation()}var i=a("assets/js/device.js"),n=a("assets/js/createReqQuery.js"),p='<li>\n  <div class="applist-item">\n    <div class="tap J_exposure" data-cacheid="{{cacheId}}">\n      <div class="applist-wrap c{{id}}">\n        <div class="applist-rank">{{$rankIndex}}</div><div class="applist-img"><img class="J_lazyload lazyload" data-src="{{icon}}" width="52" height="52"></div><div class="applist-wrap-des">\n          <h3><span class="applist-name ellipsis">{{displayName}}</span></h3>\n          <div class="applist-wrap-flex-item">\n            <div class="icon-star icon-star{{ratingScore}}">\n              <div class="icon-star icon-star-light"></div>\n            </div>\n          </div>\n          <p class="applist-info-bottom">\n            <span class="J_applistCategoryName applist-categoryname ellipsis">{{level1CategoryName}}</span>\n            <span class="J_applistSize applist-size-wrap"><span class="applist-info-size">{{apkSize}}</span>M</span>\n            {{flag}}\n          </p>\n        </div>\n      </div>\n    </div>\n    <div class="J_btnInstall install-btn" data-pname="{{packageName}}">\n  <button type="button" class="touch J_install" data-cacheid="{{cacheId}}" data-pname="{{packageName}}"></button>\n  <div class="install-btn-display">\n    <span class="J_appProgress install-progress"></span>\n    <span class="J_appStatusProgress">{{status}}</span>\n  </div>\n</div>\n  </div>\n</li>',l='<li>\n  <div class="applist-item">\n    <div class="tap J_exposure" data-cacheid="{{cacheId}}">\n      <div class="applist-wrap c{{id}}">\n        <div class="applist-rank">{{$rankIndex}}</div>\n        <div class="applist-img"><img class="J_lazyload lazyload" data-src="{{icon}}" width="52" height="52"></div><div class="applist-wrap-des">\n          <h3><span class="applist-name ellipsis">{{displayName}}</span></h3>\n          <div class="applist-wrap-flex-item">\n            <div class="applist-info">\n              <div class="icon-star icon-star{{ratingScore}}">\n                <div class="icon-star icon-star-light"></div>\n              </div>\n              <span class="applist-classified ellipsis">{{level1CategoryName}}</span>\n              <span class="applit-delimit">|</span>\n              <span><span class="applist-info-size">{{apkSize}}</span>M</span>\n              {{flag}}\n            </div>\n          </div>\n          <p class="applist-brief ellipsis">{{briefShow}}</p>\n        </div>\n      </div>\n    </div>\n    <div class="J_btnInstall install-btn" data-pname="{{packageName}}">\n  <button type="button" class="touch J_install" data-cacheid="{{cacheId}}" data-pname="{{packageName}}"></button>\n  <div class="install-btn-display">\n    <span class="J_appProgress install-progress"></span>\n    <span class="J_appStatusProgress">{{status}}</span>\n  </div>\n</div>\n  </div>\n</li>\n\n',d=a("assets/js/module/render.js"),r=a("assets/js/module/tap.js"),c=a("assets/js/request.js"),o=(a("assets/js/formate/mingleList.js"),a("components/app-suggest/app-suggest.js")),v=a("assets/js/formate/applist.js"),m=a("assets/js/module/itemData.js");i.registerAppStatus();var f="app",g=!1,u=!1,h=function(a,s){var n;n=a.briefShow?l:p;var o,v={list:s,tpl:n},m=a.contain;g=a.expendMore;var f=a.lazyLoad,h=a.exposure,x=function(a){if(f&&h){var s=parseInt(a.offset().top),t=s+a.height();f.clearMemory(s,t),h.clearMemory(s,t)}};if(isInstantData&&(n=n.replace(/([\s\S]*)(<\/li>)/g,function(a,s,t){return s+'<div class="statistics" data-pos="{{pos}}" data-page-pos="{{pagePos}}">\n	{{index}}\n	{{tapAmount}}\n	{{downAmount}}\n	{{covertRate}}\n</div>'+t})),a.diff&&!u){var y=$(m).find(".applist");o=y[0];var j=document.createElement("div");v.contain=j,d(v);var J=$(j),N=J.find("li"),_=y.find("li");N.each(function(a,s){var t=$(s),e=t.find(".J_install").data("pname"),i=_.eq(a);return 0===i.length?(y.append(N.slice(a)),!1):void(e!==i.find(".J_install").data("pname")&&(x(i),i.replaceWith(t)))});var b=_.length,S=b-N.length;if(S>0)for(var k=0;S>k;k++){var I=_.eq(b-1-k);I.remove(),x(I)}u=!0}else{var w=o=document.createElement("ul");w.className="applist",v.contain=w,d(v),isInstantData&&$(w).find("li").on("touchstart",".statistics",function(a){a.stopPropagation()}).on("click",".statistics",function(){optStat.data={pos:this.dataset.pos,statType:"index",mark:"default"},c.getJSON(optStat)}),m.appendChild(w),r.on(w),$(w).on("tap",".tap,.J_install",e)}t(a,o),i.checkAppsStatus(o,s)};s.render=h});
;define("components/app-suggest/app-suggest.js",function(a,s){function t(a){var s=this.dataset,t=o.get(s.cacheid),n=t.packageName,p=t.id;window.ref="searchResult";var l=i({elem:this,posPrefix:m,newRef:!0,cacheItem:t});if("button"===this.tagName.toLowerCase()){if(this.disabled)return;if("true"!==s.installed){var d=$.extend(l,{pName:n,appId:p});e.install(d)}else market.openApp(JSON.stringify({pName:n}))}else{l.extra_params.refs=ajaxData.refs+"-detail/"+n;var c=$.extend(l,{url:"mimarket://details?appId="+p,title:t.displayName,launchMode:loadDetailMethod});market.loadPage(JSON.stringify(c))}a.stopPropagation()}var e=a("assets/js/device.js"),i=a("assets/js/createReqQuery.js"),n='<li>\n  <div class="applist-item">\n    <div class="tap J_exposure" data-cacheid="{{cacheId}}">\n      <div class="applist-wrap c{{id}}">\n        <div class="applist-rank">{{$rankIndex}}</div><div class="applist-img"><img class="J_lazyload lazyload" data-src="{{icon}}" width="52" height="52"></div><div class="applist-wrap-des">\n          <h3><span class="applist-name ellipsis">{{displayName}}</span></h3>\n          <div class="applist-wrap-flex-item">\n            <div class="icon-star icon-star{{ratingScore}}">\n              <div class="icon-star icon-star-light"></div>\n            </div>\n          </div>\n          <p class="applist-info-bottom">\n            <span class="J_applistCategoryName applist-categoryname ellipsis">{{level1CategoryName}}</span>\n            <span class="J_applistSize applist-size-wrap"><span class="applist-info-size">{{apkSize}}</span>M</span>\n            {{flag}}\n          </p>\n        </div>\n      </div>\n    </div>\n    <div class="J_btnInstall install-btn" data-pname="{{packageName}}">\n  <button type="button" class="touch J_install" data-cacheid="{{cacheId}}" data-pname="{{packageName}}"></button>\n  <div class="install-btn-display">\n    <span class="J_appProgress install-progress"></span>\n    <span class="J_appStatusProgress">{{status}}</span>\n  </div>\n</div>\n  </div>\n</li>',p=a("assets/js/module/render.js"),l=a("assets/js/module/tap.js"),d=a("assets/js/module/lazyLoad.js"),c=new d,r=a("components/list-panel/list-panel.js"),o=a("assets/js/module/itemData.js");e.registerAppStatus();var m="appSuggest",v=function(a){var s=r.createPanel(a.title),i=s.content,d=$(i);d.wrap('<div class="applist-wraper"></div>'),s.contain.classList.add("app-suggest");var o=a.list;p({contain:i,tpl:n,list:o}),i.className="applist",a.contain.appendChild(s.contain),l.on(i),d.on("tap",".tap,.J_install",t),c.show(!0),e.checkAppsStatus(i,o)};s.render=v});
;define("assets/js/scrollEvent.js",function(n,o,e){var f,i=$(window),t=function(n,o){i.off("scroll.efficient").on("scroll.efficient",function(){f||(f=setTimeout(function(){f=null,n(o)},100))})};e.exports=t});
;define("assets/js/scrollBottomEvent.js",function(o,t,n){var l=function(o,t){var n,l=t.contain||window,s=$(l),c=s.height(),i=l.scrollHeight||document.body.scrollHeight;s.off("scroll.onbottom").on("scroll.onbottom",function(){n||(n=setTimeout(function(){n=null,(l.scrollTop||window.scrollY)+c>i-560&&(s.off("scroll.onbottom"),o(t))},100))})};n.exports=l});
;define("assets/js/request.js",function(e,t,a){function r(e){if("true"===e.target.dataset.retry){i(),g++;var t=market.checkApis(JSON.stringify({apiNames:[{name:"showDialog"}]}));t&&g>=3&&(window.positiveCb=function(){market.loadPage(JSON.stringify({url:"intent:#Intent;component=com.xiaomi.market/.testutils.NetworkDiagnosticsActivity;B.start=true;end"}))},market.showDialog(JSON.stringify({title:c.title,message:c.message,positiveText:c.positiveText,negativeText:c.negativeText,positiveCb:"positiveCb",negativeCb:""})))}}function i(){u.forEach(function(e){k.push(m(e))}),u.length=0,document.removeEventListener("click",r),market.registerNetworkChange(JSON.stringify({callBack:""})),delete window.autoReload}function n(){u.length=0}function o(){for(var e=0;l>e;e++){var t="landCallBack"+e;delete window[t]}for(;k.length>0;){var a=k.shift();a.abort()}}function s(e,t,a){market.recordCountEvent(JSON.stringify({category:"H5_Request",key:t?t:a.split("?")[0],params:{time:e}}))}var c={zh:{title:"网络提示",message:"检测到您的网络存在问题，建议您进行网络诊断并反馈结果，我们会尽快处理！",positiveText:"开始网络诊断",negativeText:"不了，谢谢"},en:{title:"Network issue",message:"There may be a problem with your network connection. Test your network to resolve the issue.",positiveText:"Test network",negativeText:"Later"}};c=c[lang];var l=0,u=[],g=0,k=[],m=function(e){function t(e){n&&(n.changePositon("bottom"),n.hide()),g=0,m(e)}function a(t,a,l){s("error",e.key,c),n&&n.showErr(),o&&o(t,a,l),u.push(e),window.autoReload=function(e){var t=JSON.parse(e).state;(1===t||2===t)&&i()},market.registerNetworkChange&&market.registerNetworkChange(JSON.stringify({callBack:"autoReload"})),1===u.length&&document.addEventListener("click",r)}var n=e.load,o=e.errorCallBack,c=e.url;market.signature&&(c=market.signature(c));var k=e.data,m=e.callBack;n&&n.showLoading();var v=new Date,d=$.ajax({dataType:"json",type:"GET",url:c,data:k,success:function(a){var r=new Date,i=Math.round((r-v)/100)/10;s(i,e.key,c),t(a)},error:function(e,r,i){var n=market.checkApis(JSON.stringify({apiNames:[{name:"request"}]}));if(n){var o="landCallBack"+l++;window[o]=function(n){n?(n=n.replace(/\n/g,"\\n").replace(/\r/g,"\\r"),t(JSON.parse(n))):a(e,r,i),delete window[o]},market.request(JSON.stringify({url:c,get:!0,params:k,callBack:o}))}else a(e,r,i)},timeout:1e4});return d};a.exports={getJSON:m,clearFailReq:n,abort:o}});